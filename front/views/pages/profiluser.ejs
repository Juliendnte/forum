<!DOCTYPE html>
<html lang="en">

<head>
    <title>CODER</title>
    <%- include('../components/head'); %>
</head>

<body>
<%- include('../components/Pop-up-Friend'); %>
<%- include('../components/Pop-up-Follower'); %>
<%- include('../components/header'); %>
<section class="section-global">
    <%- include('../components/aside'); %>
    <section class="profil-user-global">
        <section class="info-user-global-ctn">
            <div class="img-user-global">
                <img src="<%= dataUser.utilisateur.Path %>" alt="img de profil">
            </div>
            <div class="info-user-global">
                <div class="info-user-name-email-date">
                    <div class="info-user-name-email">
                        <span><%= dataUser.utilisateur.Name %></span>
                        <span><%= dataUser.utilisateur.Email %></span>
                        <% if (dataUser.utilisateur.Biography === null ) {%>
                            <div class="biographie-text">
                                <p>Ajouter une biographie</p>
                            </div>
                        <%} else {%>
                            <div class="biographie-text">
                                <span><%= dataUser.utilisateur.Biography%></span>
                            </div>
                        <% } %>
                    </div>
                    <div class="info-user-date">
                        <span>Membre depuis le : </span>
                        <span><%= dataUser.utilisateur.Create_at_formatted %></span>
                    </div>
                    <div class="info-user-tagsFav">
                        <div class="info-user-tagsFav">
                            <% if (dataUser.utilisateur.Tags && dataUser.utilisateur.Tags.length > 0) { %>
                                <% dataUser.utilisateur.Tags.forEach(function(tag) { %>
                                    <img src="<%= tag %>" alt="Tag Icon" />
                                <% }); %>
                            <% } else { %>
                            <% } %>
                        </div>
                    </div>
                </div>
                <div class="info-user-follow-friend-global">
                    <div class="info-user-follow-friend">
                        <div class="info-user-follow">
                            <button class="btn-follow-friend" id="btnFollow">
                                <span><%= dataUser.utilisateur.Follow.length %></span>
                                <span>followers</span>
                            </button>
                        </div>
                        <div class="info-user-friend">
                            <button class="btn-follow-friend" id="btnFriend">
                                <span><%= dataUser.utilisateur.Friends.length %></span>
                                <span>Suivi(e)s</span>
                            </button>
                        </div>
                    </div>
                    <div class="btn-follow-profil">
                        <button>Modifier le profil</button>
                    </div>
                </div>
            </div>
        </section>
        <section class="info-like-post-ctn">
            <div class="info-like-post-global">
                <div class="post-global">
                    <%
                    var countPosts = 0;
                    dataUser.utilisateur.VueEnsemble.forEach(function(post) {
                        if (post.Type === 'post') {
                            countPosts++;
                        }
                    });
                    %>
                    <span><%= countPosts %></span>
                    <span>Publications</span>
                </div>
                <div class="like-global">
                    <span>158</span>
                    <span>Votes</span>
                </div>
            </div>
        </section>
        <section class="info-user-biographie-ctn">
            <div class="nav-bar-user-global">
                <span class="nav-item select" id="vue-densemble">Vue d'ensembles</span>
                <span class="nav-item" id="postes">Publications</span>
                <span class="nav-item" id="commentaires">Commentaires</span>
            </div>
            <div class="content">
                <div class="posts">
                    <% if (dataUser && dataUser.utilisateur && dataUser.utilisateur.VueEnsemble) { %>
                        <% dataUser.utilisateur.VueEnsemble.forEach(function(item) { %>
                            <% if (item.Type === 'post') { %>
                                <div class="post">
                                    <h3><%= item.TopicTitle %></h3>
                                    <p><%= item.PostContent %></p>
                                </div>
                            <% } %>
                        <% }); %>
                    <% } else { %>
                        <p>Aucun contenu disponible.</p>
                    <% } %>
                </div>
                <div class="messages">
                    <% if (dataUser && dataUser.utilisateur && dataUser.utilisateur.VueEnsemble) { %>
                        <% dataUser.utilisateur.VueEnsemble.forEach(function(item) { %>
                            <% if (item.Type === 'message') { %>
                                <div class="message">
                                    <p><%= item.CommentContent %></p>
                                </div>
                            <% } %>
                        <% }); %>
                    <% } else { %>
                        <p>Aucun commentaire disponible.</p>
                    <% } %>
                </div>
            </div>
        </section>
    </section>
</section>
</body>

</html>